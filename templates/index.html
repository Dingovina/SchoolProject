{% extends "base.html" %}

{% block content %}
    {% if current_user.is_authenticated %}
        {% if current_user.role == "Operator" %}
                <h1>Активные вопросы</h1>
                {% for question in quests %}
                    {% if not question.answered %}
                        {% if not question.personal and question.user_id != current_user.id %}
                            <p>
                                {{ question.author_username }}<br>
                                <textarea rows="2" cols="50" disabled>{{question.text}}</textarea>
                            </p>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <h1>Решённые вопросы</h1>
                {% for question in quests %}
                    {% if question.answered %}
                        {% if not question.personal and question.user_id != current_user.id %}
                            <p>
                                {{ question.author_username }}<br>
                                <textarea rows="2" cols="50" disabled>{{question.text}}</textarea>
                                <a class="btn btn-success" href="/open/{{ question.id }}">Посмотреть ответ</a>
                            </p>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            {% elif current_user.role == "Admin" %}
                <h3>Активные вопросы</h3>
                {% for question in quests %}
                    {% if question.priority == "red" %}
                        {% if question.answered == False %}
                            <p>
                                {{ question.author_username }}<br>
                                <textarea rows="2" cols="50" disabled>{{question.text}}</textarea>
                            </p>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                {% for question in quests %}
                    {% if question.priority == "yellow" %}
                        {% if question.answered == False %}
                            <p>
                                {{ question.author_username }}<br>
                                <textarea rows="2" cols="50" disabled>{{question.text}}</textarea>
                            </p>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                {% for question in quests %}
                    {% if question.priority == "green" %}
                        {% if question.answered == False %}
                            <p>
                                {{ question.author_username }}<br>
                                <textarea rows="2" cols="50" disabled>{{question.text}}</textarea>
                            </p>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <h3>Решённые вопросы</h3>
                {% for question in quests %}
                        {% if question.answered == True %}
                            <p>
                                {{ question.author_username }}<br>
                                <textarea rows="2" cols="50" disabled>{{question.text}}</textarea>
                                <a class="btn btn-success" href="/open/{{ question.id }}">Открыть ответ</a>
                            </p>
                        {% endif %}
                {% endfor %}
            {% elif current_user.role == "Specialist" %}
                <h3>Активные вопросы</h3>
                {% for question in quests %}
                    {% if question.priority == "red" %}
                        {% if question.answered == False %}
                            <p>
                                {{ question.author_username }}<br>
                                <textarea rows="2" cols="50" disabled>{{question.text}}</textarea><br>
                                <a class="btn btn-success" href="/add_answer/{{ question.id }}">Добавить ответ</a>
                            </p>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                {% for question in quests %}
                    {% if question.priority == "yellow" %}
                        {% if question.answered == False %}
                            <p>
                                {{ question.author_username }}<br>
                                <textarea rows="2" cols="50" disabled>{{question.text}}</textarea><br>
                                <a class="btn btn-success" href="/add_answer/{{ question.id }}">Добавить ответ</a>
                            </p>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                {% for question in quests %}
                    {% if question.priority == "green" %}
                        {% if question.answered == False %}
                            <p>
                                {{ question.author_username }}<br>
                                <textarea rows="2" cols="50" disabled>{{question.text}}</textarea><br>
                                <a class="btn btn-success" href="/add_answer/{{ question.id }}">Добавить ответ</a>
                            </p>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <h3>Решённые вопросы</h3>
                {% for question in quests %}
                        {% if question.answered == True %}
                            <p>
                                {{ question.author_username }}<br>
                                <textarea rows="2" cols="50" disabled >{{question.text}}</textarea><br>
                                <a class="btn btn-success" href="/open/{{ question.id }}">Открыть ответ</a>
                            </p>
                        {% endif %}
                {% endfor %}
        {% endif %}
    {% else %}
        <h3>Вы не авторизованы</h3>
    {% endif %}
{% endblock %}